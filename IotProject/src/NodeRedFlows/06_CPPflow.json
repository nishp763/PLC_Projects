[{"id":"1dc22906.8f815f","type":"tab","label":"C++ OEE Calculator","disabled":false,"info":""},{"id":"5d484884.356788","type":"inject","z":"1dc22906.8f815f","name":"","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":120,"wires":[["9371046b.98986"]]},{"id":"3f450b5d.072de4","type":"exec","z":"1dc22906.8f815f","command":"/root/oeecalculator","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"calculate oee","x":610,"y":100,"wires":[["22c59530.ea873a"],["6f75b0a4.2c2ab8"],[]]},{"id":"22c59530.ea873a","type":"function","z":"1dc22906.8f815f","name":"ConvertToJSON","func":"var cppoutput = msg.payload; // get output from C++ program execution\nvar metric_array = cppoutput.split(\"\\n\", 4); // split into 4 string items with newline character\n\n// loop through array/each item and clean up the string\nfor (var i = 0; i < metric_array.length; i++) \n{\n    var out_str = metric_array[i];\n    out_str = out_str.replace(\" %\",\"\"); // remove <space>+% character from string\n    out_str = out_str.replace(\" \",\"\"); // remove space in the string\n    var temp = out_str.split(\":\"); // split the sttring into key:value\n    var temp_msg = {}; // empty message\n    temp_msg.topic = temp[0]; // set topic\n    temp_msg.payload = temp[1]; // set payload for the topic\n    metric_array[i] = temp_msg; // add it to the array\n}\n\nreturn [metric_array[0], metric_array[1], metric_array[2], metric_array[3]];","outputs":4,"noerr":0,"x":800,"y":80,"wires":[["b4aeb468.6f58","2921112f.abb24e","7b3015ea.d6fccc"],["1b480be8.215984","24220a15.ba0366","7b3015ea.d6fccc"],["ba7d8f5c.041d8","1d151cdc.8bfbc3","7b3015ea.d6fccc"],["b34a4961.0fb92","e7008c72.8ab428","7b3015ea.d6fccc"]]},{"id":"b4aeb468.6f58","type":"ui_gauge","z":"1dc22906.8f815f","name":"Availability Gauge","group":"faf5e7f5.ec6928","order":1,"width":5,"height":4,"gtype":"gage","title":"Availability","label":"","format":"{{value | number:3}} %","min":0,"max":"100","colors":["#1f77b4","#1f77b4","#1f77b4"],"seg1":"","seg2":"","x":1170,"y":60,"wires":[]},{"id":"1b480be8.215984","type":"ui_gauge","z":"1dc22906.8f815f","name":"Performance Gauge","group":"faf5e7f5.ec6928","order":2,"width":5,"height":4,"gtype":"gage","title":"Performance","label":"","format":"{{value | number:3}} %","min":0,"max":"100","colors":["#d62728","#d62728","#d62728"],"seg1":"","seg2":"","x":1180,"y":100,"wires":[]},{"id":"ba7d8f5c.041d8","type":"ui_gauge","z":"1dc22906.8f815f","name":"Quality Gauge","group":"faf5e7f5.ec6928","order":3,"width":5,"height":4,"gtype":"gage","title":"Quality","label":"","format":"{{value | number:3}} %","min":0,"max":"100","colors":["#ff7f0e","#ff7f0e","#ff7f0e"],"seg1":"","seg2":"","x":1160,"y":140,"wires":[]},{"id":"b34a4961.0fb92","type":"ui_gauge","z":"1dc22906.8f815f","name":"OEE Gauge","group":"faf5e7f5.ec6928","order":4,"width":15,"height":4,"gtype":"gage","title":"Overall Equipment Efficiency (OEE)","label":"","format":"{{value | number:3}} %","min":0,"max":"100","colors":["#2ca02c","#2ca02c","#2ca02c"],"seg1":"","seg2":"","x":1150,"y":180,"wires":[]},{"id":"2921112f.abb24e","type":"ui_chart","z":"1dc22906.8f815f","name":"","group":"59732101.0280b","order":1,"width":0,"height":0,"label":"Availability (%)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1160,"y":340,"wires":[[]]},{"id":"c4ddcebd.f052c","type":"ui_button","z":"1dc22906.8f815f","name":"Clear UI","group":"faf5e7f5.ec6928","order":6,"width":15,"height":1,"passthru":false,"label":"CLEAR","tooltip":"This button will clear the UI Components","color":"","bgcolor":"","icon":"","payload":"[]","payloadType":"json","topic":"","x":800,"y":280,"wires":[["b4aeb468.6f58","1b480be8.215984","ba7d8f5c.041d8","b34a4961.0fb92","2921112f.abb24e","24220a15.ba0366","1d151cdc.8bfbc3","e7008c72.8ab428","7b3015ea.d6fccc"]]},{"id":"9371046b.98986","type":"function","z":"1dc22906.8f815f","name":"Simulate Machine Data","func":"// generate data points\nvar planned_production_time = 480; // fixed production time of 8 hrs (480 mins)\n\nvar stop_time = Math.floor(Math.random() * (150 - 0) + 0); // generate stop time betwee 0 to 150 mins\n\nvar ideal_cycle_time = (1/60); // fixed cycle time of 0.01666666667\n\nvar good_count = Math.floor(Math.random() * (19000 - 18500) + 18500); // generate good count from 18500 to 19500\n\nvar total_count = Math.floor(Math.random() * (19300 - 19000) + 19000); // generate total count from 19000 to 19300\n\nvar [msg1, msg2, msg3, msg4, msg5, msg6] = [{},{},{},{},{},{}]; // declare output messages\n\n\n// generate output message structure with appropriate topic and payload\nmsg1.topic = \"Command params\";\nmsg1.payload = \" \" + String(planned_production_time) + \" \" +\n              String(stop_time) + \" \" +\n              String(ideal_cycle_time) + \" \" +\n              String(good_count) + \" \" +\n              String(total_count);\n\nmsg2.topic = \"Planned Production Time\";\nmsg2.payload = planned_production_time;\n\nmsg3.topic = \"Stop Time\";\nmsg3.payload = stop_time;\n\nmsg4.topic = \"Ideal Cycle Time\";\nmsg4.payload = ideal_cycle_time;\n\nmsg5.topic = \"Good Count\";\nmsg5.payload = good_count;\n\nmsg6.topic = \"Total Count\";\nmsg6.payload = total_count;\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6];","outputs":6,"noerr":0,"x":290,"y":240,"wires":[["3f450b5d.072de4"],["93b2326.3f563d"],["6a0c64b5.13decc"],["f2d4f0c1.b224e8"],["4fcd6c16.f169e4"],["7f2bcaee.f344d4"]]},{"id":"6f75b0a4.2c2ab8","type":"debug","z":"1dc22906.8f815f","name":"error","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":140,"wires":[]},{"id":"93b2326.3f563d","type":"ui_text","z":"1dc22906.8f815f","group":"11dcc194.7cd42e","order":1,"width":0,"height":0,"name":"Planned Production Time","label":"Planned Production Time","format":"{{msg.payload}} minutes","layout":"row-left","x":590,"y":200,"wires":[]},{"id":"6a0c64b5.13decc","type":"ui_text","z":"1dc22906.8f815f","group":"11dcc194.7cd42e","order":2,"width":0,"height":0,"name":"Stop Time","label":"Stop Time","format":"{{msg.payload}} minutes","layout":"row-left","x":540,"y":240,"wires":[]},{"id":"f2d4f0c1.b224e8","type":"ui_text","z":"1dc22906.8f815f","group":"11dcc194.7cd42e","order":3,"width":0,"height":0,"name":"Ideal Cycle Time","label":"Ideal Cycle Time","format":"{{value | number:6}} minutes/piece","layout":"row-left","x":560,"y":280,"wires":[]},{"id":"4fcd6c16.f169e4","type":"ui_text","z":"1dc22906.8f815f","group":"11dcc194.7cd42e","order":4,"width":0,"height":0,"name":"Good Count","label":"Good Count","format":"{{msg.payload}} pieces","layout":"row-left","x":550,"y":320,"wires":[]},{"id":"7f2bcaee.f344d4","type":"ui_text","z":"1dc22906.8f815f","group":"11dcc194.7cd42e","order":5,"width":0,"height":0,"name":"Total Count","label":"Total Count","format":"{{msg.payload}} pieces","layout":"row-left","x":550,"y":360,"wires":[]},{"id":"24220a15.ba0366","type":"ui_chart","z":"1dc22906.8f815f","name":"","group":"59732101.0280b","order":2,"width":0,"height":0,"label":"Performance (%)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#d62728","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1170,"y":380,"wires":[[]]},{"id":"1d151cdc.8bfbc3","type":"ui_chart","z":"1dc22906.8f815f","name":"","group":"59732101.0280b","order":3,"width":0,"height":0,"label":"Quality (%)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#ff7f0e","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1150,"y":420,"wires":[[]]},{"id":"e7008c72.8ab428","type":"ui_chart","z":"1dc22906.8f815f","name":"","group":"59732101.0280b","order":4,"width":0,"height":0,"label":"OEE (%)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#2ca02c","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1140,"y":460,"wires":[[]]},{"id":"7b3015ea.d6fccc","type":"ui_chart","z":"1dc22906.8f815f","name":"bar chart","group":"faf5e7f5.ec6928","order":5,"width":15,"height":7,"label":"","chartType":"bar","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#d62728","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1140,"y":260,"wires":[[]]},{"id":"faf5e7f5.ec6928","type":"ui_group","z":"","name":"OEE Gauges","tab":"392bf84c.5e57d","order":2,"disp":true,"width":15,"collapse":false},{"id":"59732101.0280b","type":"ui_group","z":"","name":"OEE Charts","tab":"392bf84c.5e57d","order":3,"disp":true,"width":7,"collapse":false},{"id":"11dcc194.7cd42e","type":"ui_group","z":"","name":"Machine Data","tab":"392bf84c.5e57d","order":1,"disp":true,"width":"7","collapse":false},{"id":"392bf84c.5e57d","type":"ui_tab","z":"","name":"OEE Dashboard","icon":"","disabled":false,"hidden":false}]